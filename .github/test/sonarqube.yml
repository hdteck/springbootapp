name: sonarqube tests
description: test de sonarqube
runs:
  - name: SonarQube Scan
    uses: sonarsource/sonarqube-scan-action@master
    with:
         projectBaseDir: src
         args: >
               -Dsonar.verbose=true
               -Dsonar.projectKey=demoapp
    env:
        SONAR_TOKEN: ${{ secrets.SONAR_SECRET }}
        SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}
  - name: SonarQube QualityGate    
    uses: sonarsource/sonarqube-quality-gate-action@master
    env:
        SONAR_TOKEN: ${{ secrets.SONAR_SECRET }}
        SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }} 